# 25.11.25.nb

**Description:**
This code is designed to reproduce the caesar cipher test, or more generally, the ability to prompt LLMs over a range of temperatures with a number of repetitions, utilising LLMs via the openrouter service over local models via Ollama.

## Code

```mathematica
(* Setup variables *)
openRouterURL = "meituan/longcat-flash-chat:free";
apiKey = SystemCredential["OpenAIAPIKey"];
modelName = "z-ai/glm-4.5-air:free";
prompt = "here is a coded message:'N ymnsp ymjwjktwj N fr', decipher it please and respond with the decipherred message only.";
temps = Range[0, 2, 0.2]; 
repetitions = 25;

(* Define function to send API request and return the text *)
LLMRequest[temp_] := Module[{requestBody, request, rawContent, responseParsed, result}, 
    (* Construct the request body with changing temperature'temp' *)
    requestBody = <|
        "model" -> modelName, 
        "messages" -> {<|"role" -> "user", "content" -> prompt|>}, 
        "temperature" -> temp, 
        "max_tokens" -> 1000
    |>;
    
    (* Construct the HTTP request *)
    request = HTTPRequest[openRouterURL, <|
        "Method" -> "POST", 
        "Headers" -> {
            "Content-Type" -> "application/json", 
            "Authorization" -> "Bearer " <> apiKey
        }, 
        "Body" -> ExportString[requestBody, "JSON"]
    |>];
    
    (* Send request, handle errors, and extract text *)
    rawContent = Quiet @ Check[URLRead[request, "Content"], "API_ERROR_FAILURE" (* Return error message instead of crashing *)];
    
    If[rawContent === "API_ERROR_FAILURE" || StringLength[rawContent] == 0, 
        result = "API_FAILED", 
        responseParsed = ImportString[rawContent, "JSON"];
        (* Return the text. If 'choices' is missing, return error code *)
        result = Quiet @ Check[responseParsed["choices", 1, "message", "content"], "NO_CHOICES_FOUND"];
    ];
    result
];

(* Outer table iterates over temperatures (t) *)
(* Nested inner table iterates over repetitions (r) *)
OR = Table[
    Table[LLMRequest[t], {r, repetitions}], 
    {t, temps}
];

ORT = Transpose[OR];

Export["OR5.xlsx", "zaiglm4.5airfree" -> ORT, "XLSX"]
```
